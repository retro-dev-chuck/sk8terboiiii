[gd_scene load_steps=30 format=3 uid="uid://b6nwq01uxjmcb"]

[ext_resource type="Script" uid="uid://bc8q2bpqccab8" path="res://Game/Respawn.gd" id="1_kgoo8"]
[ext_resource type="PackedScene" uid="uid://bwmepum2xna3u" path="res://NotSoCoolPlayer/Pre_Player.tscn" id="1_t8k4y"]
[ext_resource type="PackedScene" uid="uid://qerxdbcr3bnl" path="res://Map/Walls.tscn" id="2_pa8ys"]
[ext_resource type="Script" uid="uid://dkic2lgoi803t" path="res://NotSoCoolPlayer/DeathTracker.gd" id="2_vv5gj"]
[ext_resource type="PackedScene" uid="uid://dfae8oexp6jvk" path="res://Map/TopPart.glb" id="3_ekh0v"]
[ext_resource type="PackedScene" uid="uid://6sdmi3h2j3tb" path="res://Map/Items/Pre_MapTorch.tscn" id="3_v3iej"]
[ext_resource type="PackedScene" uid="uid://8v55anliqytv" path="res://Environment/Pre_Campfire.tscn" id="7_kgoo8"]
[ext_resource type="Texture2D" uid="uid://cko0yfrfelf1g" path="res://Environment/Sky.png" id="7_rw5j3"]
[ext_resource type="PackedScene" uid="uid://dts7buxkebqnu" path="res://Environment/Foliage.glb" id="8_kgoo8"]
[ext_resource type="PackedScene" uid="uid://tdcrfae2q3mb" path="res://Map/Platforms/Pre_Platform.tscn" id="8_quc0v"]
[ext_resource type="PackedScene" uid="uid://c007jhi43ya1i" path="res://Map/Totem/Pre_TotemSlot.tscn" id="9_vv5gj"]
[ext_resource type="Texture2D" uid="uid://btg768c26byfl" path="res://Environment/Ground.png" id="10_rnsa3"]
[ext_resource type="PackedScene" uid="uid://6lf0av5d2gda" path="res://NotSoCoolPlayer/Torch/Pre_PlayerTorch.tscn" id="11_6vy5n"]
[ext_resource type="Texture2D" uid="uid://dhcbd7xctuiy0" path="res://Environment/Ground_n.png" id="11_toqy5"]
[ext_resource type="PackedScene" uid="uid://dxs2yskqxmf57" path="res://Map/Traps/Bundles/Bundle_SpearPressure.tscn" id="13_gnt1b"]
[ext_resource type="PackedScene" uid="uid://cxcmlkd1tq4by" path="res://Map/Pre_MapTorch_Dim.tscn" id="14_mqlep"]
[ext_resource type="PackedScene" uid="uid://cei01vwmfkx0n" path="res://Map/UI/Pre_StoryCanvas.tscn" id="15_enflg"]
[ext_resource type="Script" uid="uid://cvjxliomyamki" path="res://Story/Story.gd" id="16_4bmmj"]
[ext_resource type="PackedScene" uid="uid://bth88nemgou8s" path="res://Story/Pre_StoryTrigger.tscn" id="17_vvjys"]
[ext_resource type="PackedScene" uid="uid://bajusep27dr3r" path="res://Map/Interactable/Pre_TutorialBook.tscn" id="18_snvxv"]
[ext_resource type="PackedScene" uid="uid://4ttcyxboj6b4" path="res://Environment/Pre_Tree.tscn" id="19_3xbkl"]
[ext_resource type="PackedScene" uid="uid://dwm1tdvmkubq1" path="res://Environment/Pre_Foliage.tscn" id="22_2gtoj"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_kgoo8"]
panorama = ExtResource("7_rw5j3")

[sub_resource type="Sky" id="Sky_fh4u6"]
sky_material = SubResource("PanoramaSkyMaterial_kgoo8")

[sub_resource type="Environment" id="Environment_v7n2m"]
background_mode = 2
sky = SubResource("Sky_fh4u6")
tonemap_mode = 2
fog_enabled = true
fog_light_color = Color(0.108221, 0.115645, 0.126783, 1)
fog_light_energy = 0.1
fog_density = 0.075
fog_sky_affect = 0.9

[sub_resource type="BoxShape3D" id="BoxShape3D_snvxv"]
size = Vector3(9.92285, 1000, 3.467)

[sub_resource type="BoxShape3D" id="BoxShape3D_3xbkl"]
size = Vector3(30.4009, 1000, 3.467)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_h0x0q"]
albedo_texture = ExtResource("10_rnsa3")
normal_enabled = true
normal_texture = ExtResource("11_toqy5")
uv1_scale = Vector3(40, 40, 40)

[sub_resource type="BoxShape3D" id="BoxShape3D_vvjys"]
size = Vector3(10, 1, 2)

[node name="Game" type="Node3D"]

[node name="Respawn" type="Node3D" parent="." node_paths=PackedStringArray("player")]
script = ExtResource("1_kgoo8")
player = NodePath("../Player")
metadata/_custom_type_script = "uid://bc8q2bpqccab8"

[node name="DeathTracker" type="Node3D" parent="." node_paths=PackedStringArray("player", "respawn")]
script = ExtResource("2_vv5gj")
player = NodePath("../Player")
respawn = NodePath("../Respawn")
metadata/_custom_type_script = "uid://dkic2lgoi803t"

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_v7n2m")

[node name="Player" parent="." instance=ExtResource("1_t8k4y")]
transform = Transform3D(0.953096, 0, 0.30441, 0, 1.00053, 0, -0.30441, 0, 0.953096, 2.97158, 0.59881, 22.1368)
speed = 5.0
sprint_speed = 6.5
jump_velocity = 6.5
coyote_time_length_ms = 30.0

[node name="Walls" parent="." instance=ExtResource("2_pa8ys")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1000, 0)

[node name="MapTorch" parent="." instance=ExtResource("3_v3iej")]
transform = Transform3D(0.965926, 0.258819, 0, -0.258819, 0.965926, 0, 0, 0, 1, -4.916, 2, 13.581)

[node name="Interactable" parent="MapTorch" index="2"]
destroy_on_pick = false

[node name="MapTorch2" parent="." instance=ExtResource("3_v3iej")]
transform = Transform3D(0.965926, -0.258819, 0, 0.258819, 0.965926, 0, 0, 0, 1, 4.784, 2, 13.581)

[node name="Interactable" parent="MapTorch2" index="2"]
destroy_on_pick = false

[node name="TopPart" parent="." instance=ExtResource("3_ekh0v")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0, 0)

[node name="StaticBody3D" type="StaticBody3D" parent="TopPart"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="TopPart/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.0281, 0, 13.2788)
shape = SubResource("BoxShape3D_snvxv")

[node name="StaticBody3D2" type="StaticBody3D" parent="TopPart"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 20.0065, 0, -1.74902e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="TopPart/StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.0281, 0, 13.2788)
shape = SubResource("BoxShape3D_snvxv")

[node name="StaticBody3D3" type="StaticBody3D" parent="TopPart"]
transform = Transform3D(-2.78181e-08, 0, 1, 0, 1, 0, -1, 0, -2.78181e-08, 0.0393515, 0, -3.44022e-09)

[node name="CollisionShape3D" type="CollisionShape3D" parent="TopPart/StaticBody3D3"]
transform = Transform3D(0.999994, 0, 3.58824e-13, 0, 1, 0, -3.58824e-13, 0, 0.999994, -0.210962, 0, 13.2788)
shape = SubResource("BoxShape3D_3xbkl")

[node name="StaticBody3D4" type="StaticBody3D" parent="TopPart"]
transform = Transform3D(-2.78181e-08, 0, 1, 0, 1, 0, -1, 0, -2.78181e-08, -26.5693, 0.55246, 2.32277e-06)

[node name="CollisionShape3D" type="CollisionShape3D" parent="TopPart/StaticBody3D4"]
transform = Transform3D(0.999994, 0, 3.58824e-13, 0, 1, 0, -3.58824e-13, 0, 0.999994, -0.210962, 0, 13.2788)
shape = SubResource("BoxShape3D_3xbkl")

[node name="StaticBody3D5" type="StaticBody3D" parent="TopPart"]
transform = Transform3D(-1, 0, -7.15295e-08, 0, 1, 0, 7.15295e-08, 0, -1, 0.174653, 0.55246, 26.5375)

[node name="CollisionShape3D" type="CollisionShape3D" parent="TopPart/StaticBody3D5"]
transform = Transform3D(0.999994, 0, 3.58824e-13, 0, 1, 0, -3.58824e-13, 0, 0.999994, -0.210962, 0, 13.2788)
shape = SubResource("BoxShape3D_3xbkl")

[node name="TotemSlot" parent="." instance=ExtResource("9_vv5gj")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, 3.70294, -0.0445462, 18.0601)
has_totem = true

[node name="SpawnPoint" parent="TotemSlot" index="0"]
transform = Transform3D(-0.866025, 0, 0.5, 0, 1, 0, -0.5, 0, -0.866025, 3.40654, 0.452491, -1.87671)

[node name="TestGround" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(6.29519, 0, 0, 0, 1, 0, 0, 0, 4.38153, 0, -0.1, 35.7011)

[node name="TestGround" parent="TestGround" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround2" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(2, 0.866025, 0, -3.4641, 0.5, 0, 0, 0, 4, -20.5306, -0.1, 35.7011)

[node name="TestGround" parent="TestGround2" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround5" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(0.517638, 0.224144, 3.8637, -3.4641, 0.5, 0, -1.93185, -0.836516, 1.03528, -15.2403, -0.1, 39.9926)

[node name="TestGround" parent="TestGround5" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround6" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(-0.517638, -0.224144, 3.8637, -3.4641, 0.5, 0, -1.93185, -0.836516, -1.03528, 4.98269, -0.1, 39.9783)

[node name="TestGround" parent="TestGround6" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround7" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(-0.96945, -0.937422, -1, -3.84606, 0.266456, -0.267949, 0.517638, 0.224144, -3.8637, 21.4984, -0.1, 30.2576)

[node name="TestGround" parent="TestGround7" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround8" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(-0.319479, -0.504364, -3.43916, -3.84607, 0.266456, -0.267949, 1.05153, 0.821351, -2.02494, 30.144, -0.0999981, 16.9821)

[node name="TestGround" parent="TestGround8" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround3" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(1.73205, 0.75, -2, -3.4641, 0.5, 0, 1, 0.433013, 3.4641, -23.235, -0.0999971, 32.39)

[node name="TestGround" parent="TestGround3" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="TestGround4" parent="." instance=ExtResource("8_quc0v")]
transform = Transform3D(0.517638, 0.224144, -3.8637, -3.4641, 0.5, 0, 1.93185, 0.836516, 1.03528, -32.1866, -0.0999971, 25.0929)

[node name="TestGround" parent="TestGround4" index="1"]
skeleton = NodePath("../..")
surface_material_override/0 = SubResource("StandardMaterial3D_h0x0q")

[node name="Inside" type="Node3D" parent="."]

[node name="TestGround2" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.939693, -0.34202, 0, 0.34202, 0.939693, 0, 0, 0, 0.3, 0.4, -1.7, 9.99213)

[node name="TestGround3" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.740449, -0.0826944, 0, 0.0647809, 0.945201, 0, 0, 0, 0.225, -7.8, -3.7, 10.8921)

[node name="TestGround4" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(-0.000247404, -0.00720719, -0.224994, 0.192612, 0.916373, -0.00167013, 0.717887, -0.245869, 0.000370563, -10.8, -5, 3.89213)

[node name="TestGround5" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(-8.95493e-05, -0.008141, -0.224808, 0.0697169, 1.0351, -0.00166875, 0.259844, -0.277725, 0.000370258, -10.7976, -6.89232, -3.16077)

[node name="TestGround6" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(-0.00015467, -0.00560948, -0.225253, 0.120415, 0.713229, -0.00167205, 0.448804, -0.191364, 0.000370989, -10.3458, -8.57992, -9.46386)

[node name="MapTorch3" parent="Inside" instance=ExtResource("3_v3iej")]
transform = Transform3D(0.977616, 0, 0, 0, 1.02703, -0.258819, 0, 0.275192, 0.965926, 0.421062, -8.90803, -11.4692)

[node name="TestGround7" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.624158, 0, 0, 0, 1.07175, 0, 0, 0, 0.224815, -2.51857, -9.33909, -10.5663)

[node name="TestGround8" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.436911, 0, 0, 0, 1.07175, 0, 0, 0, 0.0674444, 6.21965, -9.33909, -10.4314)

[node name="TestGround9" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0, 0, -0.0674444, -0.149432, 1.00711, 0, 0.410562, 0.366559, 0, 7.76436, -10.0441, -8.10633)

[node name="TestGround10" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0, 0, -0.0674444, -0.104603, 1.00711, 0, 0.287393, 0.366559, 0, 7.76436, -11.7476, -3.42593)

[node name="TestGround11" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.183503, 0, 0, 0, 1.07175, 0, 0, 0, 0.0674444, 2.76496, -13.037, -3.42593)

[node name="TestGround12" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.129756, 0, -0.0476904, 0, 1.07175, 0, 0.129756, 0, 0.0476904, 2.76496, -13.037, 0.574071)

[node name="TestGround13" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(7.45058e-09, 0, -0.0674444, 0, 1.07175, 0, 0.183503, 0, -3.72529e-09, 2.76496, -13.037, 5.57407)

[node name="TestGround14" parent="Inside" instance=ExtResource("8_quc0v")]
transform = Transform3D(0.403706, 0, -3.26424e-09, 0, 1.07175, 0, -3.40378e-08, 0, 0.283267, 2.76496, -13.037, 10.1808)

[node name="Camp" type="Node3D" parent="."]

[node name="Foliage" parent="Camp" instance=ExtResource("8_kgoo8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.79076, -0.0499993, 16.7317)

[node name="Campfire" parent="Camp" instance=ExtResource("7_kgoo8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.8995, 0.229576, 19.7419)

[node name="Torch" parent="." instance=ExtResource("11_6vy5n")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.5, -3.55087, 9.72151)
visible = false

[node name="Trap_Spear_Pressure" parent="." instance=ExtResource("13_gnt1b")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.75447, -12.9875, 9.89717)

[node name="SpearTrap" parent="Trap_Spear_Pressure" index="0"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 1.17533, 1.72269)

[node name="Trap_Trigger_Pressure" parent="Trap_Spear_Pressure" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.641541)

[node name="MapTorch_Dim" parent="." instance=ExtResource("14_mqlep")]
transform = Transform3D(1, 0, 0, 0, 0.965926, 0.258819, 0, -0.258819, 0.965926, 2.95641, -11.8567, 11.5958)

[node name="Story_CanvasLayer" parent="." instance=ExtResource("15_enflg")]
unique_name_in_owner = true

[node name="Intro_Story" type="Node" parent="." node_paths=PackedStringArray("ui")]
script = ExtResource("16_4bmmj")
ui = NodePath("../Story_CanvasLayer")
metadata/_custom_type_script = "uid://cvjxliomyamki"

[node name="Totem_StoryTrigger" parent="." instance=ExtResource("17_vvjys")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.71885, 0, 18.0911)
msg = Array[String](["Resurrection totem...", "I can take it with me, but if I die when it's not at an altar", "I will die for good..."])

[node name="Torch_Story" parent="." instance=ExtResource("17_vvjys")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0236664, 0, 13.4384)
msg = Array[String](["I should take a torch with me"])

[node name="CollisionShape3D" parent="Torch_Story" index="0"]
shape = SubResource("BoxShape3D_vvjys")

[node name="Tutorial_Book" parent="." instance=ExtResource("18_snvxv")]
transform = Transform3D(0.462566, 0, -0.324434, 0, 0.565, 0, 0.324434, 0, 0.462566, -3.0274, -0.0355768, 19.0019)

[node name="StoryTrigger" parent="Tutorial_Book" instance=ExtResource("17_vvjys")]
msg = Array[String](["LMB: Use left hand        RMB: Use Right Hand", "If hand is empty, pick the item. If holding an item, throw it forward", "Hold Shift: Sprint", "Torches of the dungeon are magical, until you take them off the wall"])
is_repeatable = true

[node name="Node3D" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 30.0012)

[node name="Tree" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.96902, 0, 0)

[node name="Tree2" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.68021, 0, -4.3762)

[node name="Tree3" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.76462, 0, -11.4045)

[node name="Tree4" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(0.896789, 0, 0, 0, 1, 0, 0, 0, 1.181, 11.7519, 0, -10.6085)

[node name="Tree5" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(0.942771, 0.0293697, 0, -0.0277008, 0.999569, 0, 0, 0, 1.15846, 10.6897, 0, -5.43616)

[node name="Tree6" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(0.942771, 0.0293697, 0, -0.0277008, 0.999569, 0, 0, 0, 1.15846, 9.85869, 0, 2.55667)

[node name="Tree7" parent="Node3D" instance=ExtResource("19_3xbkl")]
transform = Transform3D(0.942771, 0.0293697, 0, -0.0277008, 0.999569, 0, 0, 0, 1.15846, -6.90438, 0, 4.17591)

[node name="Foliage" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.076, -0.0500008, 34.8947)

[node name="Foliage2" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.076, -0.0500008, 27.8947)

[node name="Foliage3" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.27975, -0.0500008, 31.1499)

[node name="Foliage4" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.0203, -0.0500008, 22.8026)

[node name="Foliage5" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.0203, -0.0500008, 35.8026)

[node name="Foliage6" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.61352, -0.0500008, 36.8335)

[node name="Foliage7" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.06364, -0.0500008, 22.9636)

[node name="Foliage8" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.14452, -0.0500008, 20.6054)

[node name="Foliage9" parent="." instance=ExtResource("22_2gtoj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.92118, -0.0428644, 16.4464)

[editable path="MapTorch"]
[editable path="MapTorch2"]
[editable path="TotemSlot"]
[editable path="TestGround"]
[editable path="TestGround2"]
[editable path="TestGround5"]
[editable path="TestGround6"]
[editable path="TestGround7"]
[editable path="TestGround8"]
[editable path="TestGround3"]
[editable path="TestGround4"]
[editable path="Trap_Spear_Pressure"]
[editable path="Torch_Story"]
